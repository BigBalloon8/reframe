{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/eth-cscs/reframe/master/schemas/runreport.json",
    "title": "Validation schema for ReFrame's run report",
    "type": "object",
    "properties": {
        "reframe_info": {
            "type": "object",
            "properties": {
                "version": {"type": "string"},
                "command": {"type": "string"},
                "user": {"type": "string"},
                "host": {"type": "string"},
                "check_search_path": {"type": "string"},
                "working_directory": {"type": "string"},
                "recursive_search_path": {"type": "boolean"},
                "settings_file": {"type": "string"},
                "stage_prefix": {"type": "string"},
                "output_prefix": {"type": "string"},
                "start_time": {"type": "string"},
                "end_time": {"type": "string"}
            },
            "additionalProperties": false,
            "required": ["check_search_path", "command", "end_time", "host",
                         "output_prefix", "recursive_search_path",
                         "stage_prefix", "start_time", "user", "version",
                         "working_directory"]
        },
        "run_info": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "runid": {"type": "number"},
                    "tests": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "testname": {"type": "string"},
                                "description": {"type": "string"},
                                "system": {"type": "string"},
                                "environment": {"type": ["string", "null"]},
                                "stagedir": {"type": ["string", "null"]},
                                "outputdir": {"type": ["string", "null"]},
                                "nodelist": {
                                    "type": "array",
                                    "items": {"type": "string"}
                                },
                                "scheduler": {"type": ["string", "null"]},
                                "jobid": {"type": ["number", "null"]},
                                "result": {
                                    "type": "string",
                                    "enum": ["success", "fail"]
                                },
                                "failing_phase": {"type": ["string", "null"]},
                                "failing_reason": {"type": ["string", "null"]},
                                "build_stdout": {"type": ["string", "null"]},
                                "build_stderr": {"type": ["string", "null"]},
                                "job_stdout": {"type": ["string", "null"]},
                                "job_stderr": {"type": ["string", "null"]},
                                "maintainers": {
                                    "type": "array",
                                    "items": {"type": ["string"]}
                                },
                                "tags": {
                                    "type": "array",
                                    "items": {"type": "string"}
                                },
                                "runid": {"type": "number"},
                                "time_setup": {"type": ["number", "null"]},
                                "time_compile": {"type": ["number", "null"]},
                                "time_run": {"type": ["number", "null"]},
                                "time_sanity": {"type": ["number", "null"]},
                                "time_performance": {"type": ["number", "null"]},
                                "time_total": {"type": ["number", "null"]}
                            },
                            "additionalProperties": false,
                            "required": ["build_stderr", "build_stdout", "description",
                                         "environment", "failing_phase", "failing_reason",
                                         "job_stderr", "job_stdout", "jobid", "maintainers",
                                         "nodelist", "outputdir", "result", "scheduler",
                                         "stagedir", "system", "tags", "testname",
                                         "time_compile", "time_performance", "time_run",
                                         "time_sanity", "time_setup", "time_total"]
                        },
                        "additionalProperties": false,
                        "required": ["runid", "tests"]
                    }
                }
            }
        }
    },
    "additionalProperties": false,
    "required": ["reframe_info", "run_info"]
}
