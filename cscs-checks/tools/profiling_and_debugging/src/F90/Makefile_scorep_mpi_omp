RM := rm -f
EXECUTABLE := jacobi

all: jacobi

OBJS :=  _variableDef.o _jacobi.o _main.o

_variableDef.o:
	@echo 'Compiling: $@'
	@echo '$(PREP) $(FC) $(FFLAGS) -c -o $(@) $(@:.o=.F90)'
	$(PREP) $(FC) $(FFLAGS) -c -o $(@) $(@:.o=.F90)

_jacobi.o: _variableDef.o
	@echo 'Compiling: $@'
	@echo '$(PREP) $(FC) $(FFLAGS) -c -o $(@) $(@:.o=.F90)'
	$(PREP) $(FC) $(FFLAGS) -c -o $(@) $(@:.o=.F90)

_main.o: _variableDef.o _jacobi.o
	@echo 'Compiling: $@'
	@echo '$(PREP) $(FC) $(FFLAGS) -c -o $(@) $(@:.o=.F90)'
	$(PREP) $(FC) $(FFLAGS) -c -o $(@) $(@:.o=.F90)

$(EXECUTABLE): $(OBJS)
	@echo 'Linking: $@'
	$(PREP) $(FC) $(FFLAGS) $(LDFLAGS) -o $(@) $(OBJS)
	@echo 'Finished building: $@'
	@echo ' '

clean:
	@echo 'Removing objects'
	-$(RM) $(OBJS) *.mod
	-@echo ' '

distclean:
	@echo 'Removing objects and executable'
	-$(RM) $(OBJS) $(EXECUTABLE)
	-@echo ' '
